# Telegram-бот для управления заявками на 3D-печать

## Обзор проекта
Telegram-бот для управления очередью заявок на 3D-печать с двумя ролями пользователей:
- **Пользователь**: создает заявки с .stl файлами
- **Админ** (@sementrepp): управляет заявками и их статусами

## Последние изменения
- 2025-11-08: Начальная настройка проекта
- Установлены зависимости: python-telegram-bot, gspread, google-api-python-client, APScheduler
- Настроена интеграция с Google Sheets и Google Drive

## Архитектура проекта

### Структура файлов
```
/
├── main.py                 # Главный файл запуска бота
├── bot/
│   ├── __init__.py
│   ├── handlers/
│   │   ├── __init__.py
│   │   ├── user.py        # Обработчики для пользователей
│   │   └── admin.py       # Обработчики для админа
│   ├── services/
│   │   ├── __init__.py
│   │   ├── sheets.py      # Работа с Google Sheets
│   │   ├── drive.py       # Работа с Google Drive
│   │   └── scheduler.py   # Планировщик задач
│   └── utils/
│       ├── __init__.py
│       ├── config.py       # Конфигурация
│       └── states.py       # Состояния ConversationHandler
├── .env                    # Переменные окружения (не в git)
└── requirements.txt        # Зависимости Python
```

### Ключевые функции
1. **Создание заявок**: пользователи заполняют форму (имя, фамилия, группа, цель, .stl файл)
2. **Управление очередью**: админ видит список заявок с сортировкой и пагинацией
3. **Статусы заявок**: 
   - В очереди (белый цвет в Google Sheets)
   - В работе (желтый цвет)
   - Готово (красный цвет)
4. **Google Sheets интеграция**: автоматическое сохранение всех заявок
5. **Google Drive интеграция**: загрузка и хранение .stl файлов
6. **Автоматизация**:
   - Удаление файлов через 1 неделю после статуса "готово"
   - Еженедельные дампы таблицы с удалением через 2 недели

## Переменные окружения
- `TELEGRAM_BOT_TOKEN`: токен Telegram бота
- `ADMIN_USERNAME`: username админа (sementrepp)
- `GOOGLE_SHEET_ID`: ID Google таблицы
- `GOOGLE_DRIVE_FOLDER_ID`: ID папки в Google Drive

## Технологический стек
- Python 3.11
- python-telegram-bot 22.5
- Google Sheets API (через gspread)
- Google Drive API
- APScheduler (для планирования задач)
